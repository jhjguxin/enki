{"name":"Enki","body":"# Enki\r\n\r\nA Ruby on Rails blogging app for the fashionable developer.\r\n\r\nPreferences are for the masses. Any real coder knows the easiest and best way to customize something is by *hacking code*. Because you want your blog to be you, not bog standard install #4958 with 20 posts per page instead of 15. For this you need a *clean, simple, easy to understand code base* that stays out of your way. No liquid drops and templates hindering your path, no ugly PHP(Hypertext Preprocessor) stylings burning your eyeballs.\r\n\r\n## Quick Start\r\n\r\nmake sure you are using **ruby 1.8.7**,you can controle ruby's version by rvm\r\n\r\n<pre><code>  git clone git://github.com/jhjguxin/enki.git\r\n  cd enki\r\n  git checkout -b myblog # Create a new work branch\r\n  bundle install         # Install all the required gems\r\n\r\n  cp config/database.example.yml config/database.yml\r\n  # Edit config/enki.yml and config/database.yml to taste\r\n\r\n  # Next step needs libxml2 and libxslt1 and their headers\r\n  # On Debian-based systems: apt-get install libxml2-dev libxslt1-dev\r\n  # On Mac OS X: no action required\r\n\r\n  rake db:migrate\r\n  #may be here will display some 'WARNING' message,but it no effect with rails's wrok,like\r\n  ***WARNING:*** 'require 'rake/rdoctask'' is deprecated.  Please use 'require 'rdoc/task' (in RDoc 2.4.2+)' instead.\r\n\r\n  rake            # Run tests\r\n  rails server    # Start the server\r\n  # Load http://localhost:3000/admin in your browser</code></pre>\r\n\r\nOr for bonus points, fork \"enki at github\":https://github.com/jhjguxin/enki/commits/master and clone that instead.\r\n\r\n## More info\r\n\r\nEnki is a compact, easily extendable base for your blog. It does this by being highly opinionated, for example:\r\n\r\n* Public facing views should adhere to standards (XHTML(eXtensible Hypertext Markup Language), Atom)\r\n* /yyyy/mm/dd/post-title is a good URL for your posts\r\n* Live comment preview should be provided by default\r\n* Google does search better than you or I\r\n* You don't need a plugin system when you've got decent source control\r\n* #If you're not using OpenID you're a chump\r\n* Because I'm a chump,so I decide to use devise \r\n* Hacking code is the easiest way to customize something\r\n\r\n## How it differs from Mephisto\r\n\r\nMephisto is feature packed and quite customizable. It can however be daunting trying to find your way around the code, which isn’t so good if you’re trying to hack in your own features. Enki strips out a lot of the features that you probably don’t need (multiple authors and liquid templates, for example), and focuses on keeping a tight code base that is easy to comprehend and extend.\r\n\r\n## How it differs from SimpleLog\r\n\r\nEnki embodies much of the philosophy of SimpleLog, but does so in a style that is much more consistent with Rails best practices, making it easier to understand and hack the code.\r\n\r\n## Compatibility\r\n\r\nUses rails 3. Runs on MySQL or Postgres. Works on heroku.\r\n\r\n## Contributors, these guys rock\r\n\r\n<pre><code>git log | grep Author | sort | uniq</code></pre>\r\n\r\nIf you want to help out, try tackling an \"open issue\":https://github.com/jhjguxin/enki/issues. Please include specs for any fixes. Enki is by design feature light. Unless you feel very strongly your feature should be in core, add a link to your fork in the wiki instead.\r\n\r\n## License\r\n\r\nGPL(General Public License) - See LICENSE\r\n\r\nAdmin design heavily inspired by \"Habari\":http://www.habariproject.org/en/\r\n\r\n## QA\r\n\r\nShowing the devise edit password screen?\r\nIn my rails 3 app using devise, I want to provide a link for users to edit their password.\r\n\r\nI have a standard link that points to: /users/password/edit ... Log output below(#all action in PasswordsController )\r\n<pre><code>Started GET \"/users/password/edit\" for 127.0.0.1 at 2011-08-10 10:11:46 -0700  \r\n  Processing by Devise::PasswordsController#edit as HTML  \r\n  User Load (0.6ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = 3 LIMIT 1  \r\nRedirected to http://localhost:3000/  \r\nCompleted 302 Found in 309ms </code></pre>\r\nWhy is rails redirecting? Why can't I show the edit password page? Thanks\r\n<code>Devise::PasswordsController#edit</code> is for non-authenticated users who wish to change their password using a reset token. This reset token was previously sent to the user in an email (Reset password instructions). If the user is already logged in, this edit password page will always redirect to the after-sign-in path since it shouldn't be accessible to authenticated users.\r\n\r\nI suppose what you want is to allow the user to change his password after logging in. You have to use <code>Devise::RegistrationsController#edit</code> for that.\r\n\r\n#sometimes you will catch <code>You have already activated rack 1.3.0, but your Gemfile requires rack 1.2.3.</code>\r\n这是因为迩安装了多个rack版本、环境造成混乱、请卸载掉不需要的版本或者修改了Gemfile再执行一次bundle install\r\n\r\n\r\n\r\n## Fix by Francis\r\n\r\n<code>Lesstile::CodeRayFormatter</code>in lesstile not match with coderay 1.0.1\r\ninstall lesstile with plugin\r\n<code>rails plugin install git://github.com/xaviershay/lesstile.git</code>\r\nchange lesstile.rb in 'vendor/plugins/lesstile/lib' as bellow:\r\n<pre><code>\r\n    #CodeRay.scan(CGI::unescapeHTML(code), lang).html(:line_numbers => :table).div\r\n    CodeRay.scan(CGI::unescapeHTML(code), lang).div(:line_numbers => :table)\r\n</code></pre>\r\n\r\n## add rvm in ubuntu\r\n\r\n<pre><code>\r\n#install Dependencies:\r\nsudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion\r\nsudo apt-get install ruby-rvm\r\n</code></pre>\r\n\r\n### add rvm group to user\r\n\r\n<pre><code>jhjguxin@jhjguxin-virtual-machine:~$ sudo gpasswd -a root rvm\r\nAdding user root to group rvm\r\njhjguxin@jhjguxin-virtual-machine:~$ sudo gpasswd -a jhjguxin rvm\r\nAdding user jhjguxin to group rvm\r\njhjguxin@jhjguxin-virtual-machine:~$ sudo gpasswd -a www-data rvm\r\nAdding user www-data to group rvm</code></pre>\r\n\r\n### add rvm to shell\r\n\r\nvim ~/.bashrc\r\n[[ -s \"/usr/share/ruby-rvm/scripts/rvm\" ]] && source /usr/share/ruby-rvm/scripts/rvm  # This loads RVM into a shell session.没有引号\r\n\r\nrestart the shell opened\r\n\r\nIf installation and configuration were successful, RVM should now load whenever you open a new shell. This can be tested by executing the following command which should output 'rvm is a function' as shown below.\r\n\r\nuser$ type rvm | head -1\r\nrvm is a function\r\n\r\nRVM安装完成后，就可以通过TA来安装管理 Ruby 了。用下面一条命令来安装Ruby 1.9.2\r\n\r\n$  rvm install 1.9.2\r\n\r\n*Ruby包的下载实在太慢了，这里总是中断。有个小技巧，你可以用工具下载好ruby-1.9.2-p0.tar.bz2，然后手工放到~/.rvm/archives 目录下。然后再运行这条命令，就可以直接解压安装了。\r\n\r\n \r\n\r\n把该版本的Ruby设为默认\r\n\r\nrvm --help\r\n获得rvm的常用用法：\r\n\r\nrvm [Flags] [Options] Action [Implementation[,Implementation[,...]]\r\nrvm最常用的Action包括：\r\n\r\n对Ruby的操作\r\n主要包括读取，安装，卸载，更新，读取ruby等.\r\n\r\n读取远程可安装的Ruby版本\r\n#获得当前可以用的ruby版本\r\nrvm list known\r\n安装Ruby\r\n#安装其中的ruby1.9.2-p290\r\nrvm install ruby-1.9.2-p290\r\n使用\r\n#切换到刚刚安装的ruby1.9.2-p290版本\r\nrvm use ruby1.9.2-p290\r\n读取\r\n#列出当前rvm下的ruby版本\r\nrvm list\r\n#查询当前使用的ruby版本路径\r\nwhich ruby\r\n#获得当前ruby版本\r\nruby -v\r\n输出rvm当前使用的ruby版本与gemset信息：\r\nrvm info\r\n在项目文件中使用RVM\r\n在自己的项目根目录下面，创建一个.rvmrc文件，里面内容可以指定ruby版本与gemset。例如，某项目根目录下面的.rvmrc文件内容如下：\r\n\r\nrvm ruby-1.9.2-p290@rails31\r\n这表示，该项目使用ruby1.9.2p290这个版本的ruby，gem安装在rails31下面。然后iterm的zsh或者bash；或者TextMate中的rubymate,rakemate；以及pow等工具就可以直接调用相应ruby版本与相应gemset。\r\n\r\n## rvm on ubuntu 11.10 install ruby 1.9.2 error\r\n\r\nWhen trying to install ruby 1.9.2 using rvm I got a nasty suprise:\r\n\r\n<pre><code>\r\nossl_ssl.c:110:1: error: ‘SSLv2_method’ undeclared here (not in a function)\r\nossl_ssl.c:111:1: error: ‘SSLv2_server_method’ undeclared here (not in a function)\r\nossl_ssl.c:112:1: error: ‘SSLv2_client_method’ undeclared here (not in a function)\r\nmake[1]: *** [ossl_ssl.o] Error 1\r\nmake[1]: Leaving directory `/var/cache/ruby-rvm/src/ruby-1.9.2-p180/ext/openssl'\r\nmake: *** [mkmain.sh] Error 1\r\n</code></pre>\r\n\r\nThe solution\r\n\r\n<pre><code>\r\nsudo apt-get install ruby-rvm\r\n# make sure we have $rvm_path\r\nsource /etc/profile\r\n# don't use ubuntus openssl\r\nrvm package install openssl\r\nrvm install 1.9.2 --with-openssl-dir=$rvm_path/usr\r\n</code></pre>\r\n\r\nh2. Quickstart sunspot with Rails 3\r\n\r\nAdd to Gemfile:\r\n\r\n<pre><code>\r\ngem 'sunspot_rails'\r\ngem 'sunspot_solr' # optional pre-packaged Solr distribution for use in development\r\n</code></pre>\r\n\r\nBundle it!\r\n\r\n<code>bundle install</code>\r\n\r\nGenerate a default configuration file:\r\n\r\n<code>rails generate sunspot_rails:install</code>\r\n\r\nIf sunspot_solr was installed, start the packaged Solr distribution with:\r\n\r\n<code>bundle exec rake sunspot:solr:start # or sunspot:solr:run to start in foreground</code>\r\n\r\nNow that Sunspot knows how to index the Post model, we need to get the existing data into Solr. Any time a Post is created, updated, or destroyed, Sunspot::Rails will automatically make the change to the index; you only need to do a full reindex if you’ve added or changed a searchable definition for a model.\r\n\r\n<code>$ rake sunspot:reindex</code>\r\n\r\nIf sunspot_solr was installed, start the packaged Solr distribution with:\r\n\r\n<pre><code>\r\njhjguxin@jhjguxin-Aspire-4750:~$ heroku run:detached rake sunspot:solr:start RAILS_ENV=production rake sunspot:solr:start --app francisjiang#using on heroku\r\nor type:sunspot-solr start -- -p 8983 or sunspot-solr start -- -p 8983 -d data/solr/myapp\r\n</code></pre>\r\n\r\nTry to start the solr\r\n\r\nSolr服务控制\r\n将以上内容添加到Rakefile后，将会多出4个task出来\r\n\r\n服务器启动:\r\nrake sunspot:solr:start\r\n初次启动，会安装一个embed的solr程序，那么开发环境中省去了安装配置Solr环境繁琐步骤。不过，production环境里可不要使用这个embed版。\r\n\r\n服务器停止:\r\nrake sunspot:solr:stop\r\n全部重建索引：\r\nrake sunspot:reindex\r\n如果你想看到运行日志，把服务跑在前端。可以使用一下命令:\r\nrake sunspot:solr:run\r\n使用以上命令，就能完成对Sunspot的控制。\r\n\r\n### when you get \"RSolr::Error::Http (RSolr::Error::Http - 500 Internal Server Error\r\n\r\n<pre>\r\n<code>Error: Severe errors in solr configuration.\" in log\r\nplease navigation to \"localhost:8082/solr\" check more info:\r\nthere recomment method is\r\nps -ef|grep solr\r\nkill all solr's process\r\nrm solr folder in enki root dir.reinstall the solr by type:\r\n#Generate a default configuration file:\r\nrails generate sunspot_rails:install\r\n</code>\r\n\r\nIf sunspot_solr was installed, start the packaged Solr distribution with:\r\n\r\n<code>bundle exec rake sunspot:solr:start # or sunspot:solr:run to start in foreground</code>\r\n\r\nNow that Sunspot knows how to index the Post model, we need to get the existing data into Solr. Any time a Post is created, updated, or destroyed, Sunspot::Rails will automatically make the change to the index; you only need to do a full reindex if you’ve added or changed a searchable definition for a model.\r\n\r\n<code>$ rake sunspot:reindex</code>\r\n</pre>\r\n\r\n## the feature in the future\r\n\r\n1. add reploy to reploy\r\n2. finish the permission control\r\n3. 使用验证码\r\n4. Mention @somebody. They're notified eg. When you @mention a GitHub username anywhere in the context of an issue or pull request, that person is notified and subscribed to future updates.\r\n5. @自动匹配用户名功能\r\n\r\n","tagline":"my first rails project base on enki","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}